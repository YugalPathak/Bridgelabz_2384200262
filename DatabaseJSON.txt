using System;
using System.Data.SqlClient;
using System.IO;
using Newtonsoft.Json;
using System.Data;

class Program
{
    static void Main()
    {
        // Database connection string
        string connectionString = "Server=YOUR_SERVER;Database=YOUR_DB;User Id=YOUR_USER;Password=YOUR_PASSWORD;";

        // SQL query to fetch records
        string query = "SELECT Name, Age, Email FROM Users"; // Replace with your table

        // Create a DataTable to store results
        DataTable dataTable = new DataTable();

        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            using (SqlCommand command = new SqlCommand(query, connection))
            {
                SqlDataReader reader = command.ExecuteReader();
                dataTable.Load(reader); // Load data into DataTable
            }
        }

        // Convert DataTable to JSON
        string jsonReport = JsonConvert.SerializeObject(dataTable, Formatting.Indented);

        // Print JSON report
        Console.WriteLine(jsonReport);

        // Save JSON report to a file
        File.WriteAllText("Report.json", jsonReport);

        Console.WriteLine("JSON report generated successfully!");
    }
}
